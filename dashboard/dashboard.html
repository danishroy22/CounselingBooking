<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Counseling Booking Admin Dashboard</title>
<link rel="stylesheet" href="dashboard-style.css">
</head>
<body>

<header>
  <div class="header-logos">
    <img src="../assets/logo-left.png" alt="UoM" class="header-logo">
    <img src="../assets/psychology.png" alt="Psychology Society" class="header-logo">
  </div>
  <div class="header-title">Counseling Booking Dashboard</div>
  <div class="header-logos">
    <img src="../assets/su logo prososal 3.png" alt="SU" class="header-logo">
    <img src="../assets/befrienders logo.png" alt="Befrienders" class="header-logo">
  </div>
</header>

<div class="container" style="max-width:1200px;">
  <div id="dashAuthStatus" class="dash-auth-status">
    <span id="dashUserEmail" class="dash-user-email"></span>
    <a href="../index.html" id="goToIndex" class="dash-nav-btn" title="Go to main booking page">Go to Booking Page</a>
    <button id="dashLogoutBtn" class="dash-logout-btn">Logout</button>
  </div>
</div>

<div class="container">
  <div class="calendar-nav">
    <button id="prevWeek">◀ Previous Week</button>
    <div id="weekLabel"></div>
    <button id="nextWeek">Next Week ▶</button>
  </div>

  <div class="summary">
    <div class="summary-card">
      <div class="summary-number" id="sumTotal">0</div>
      <div class="summary-label">Total Slots</div>
    </div>
    <div class="summary-card">
      <div class="summary-number" id="sumBooked">0</div>
      <div class="summary-label">Booked</div>
    </div>
    <div class="summary-card">
      <div class="summary-number" id="sumAvailable">0</div>
      <div class="summary-label">Available</div>
    </div>
  </div>

  <div class="legend">
    <span><span class="status-indicator status-available"></span>Available</span>
    <span><span class="status-indicator status-booked"></span>Booked</span>
  </div>

  <div class="calendar" id="dashboardCalendar"></div>
</div>

<!-- Booking Details Modal -->
<div class="modal" id="bookingDetailsModal">
  <div class="modal-content">
    <span class="close" id="closeModal">&times;</span>
    <h2>Booking Details</h2>
    <div id="bookingDetails"></div>
  </div>
</div>

<script type="module">
  // Load configuration
  try {
    await import('../config/env-config.js');
    console.log('[Dashboard] Configuration loaded successfully');
  } catch (error) {
    console.error('[Dashboard] Failed to load configuration:', error);
    throw new Error('Configuration file not found. Please configure your Firebase credentials.');
  }
  
  await new Promise(resolve => setTimeout(resolve, 100));
  
  // Load dashboard script
  await import('./dashboard.js');
</script>

</body>
</html>
